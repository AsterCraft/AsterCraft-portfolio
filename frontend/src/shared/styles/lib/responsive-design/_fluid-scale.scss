////
/// Responsive design utilities.
///
/// Provides functions for creating fluid, viewport-responsive values.
///
/// @group Responsive
////

@use "sass:math";

@use "../../tokens/breakpoints/" as brp;

/// Calculate fluid scaling using CSS clamp().
///
/// Creates a value that scales linearly between min and max sizes
/// across a viewport range.
///
/// @param {Number} $min-size - Minimum value (e.g., 48px)
/// @param {Number} $max-size - Maximum value (e.g., 120px)
/// @param {Number} $min-viewport [280px] - Viewport width at minimum size
/// @param {Number} $max-viewport [1920px] - Viewport width at maximum size
///
/// @return {String} CSS clamp() function
///
/// @example scss
///   .hero-title {
///     font-size: fluid-scale(48px, 120px);
///   }
///
/// @example scss - Custom viewport range
///   .hero-title {
///     font-size: fluid-scale(48px, 120px, 375px, 1440px);
///   }
///
/// @group Responsive
/// @require {function} math.div
/// @require {Variable} brp.$md-sys-viewport-compact
/// @require {Variable} brp.$md-sys-viewport-extra-large
@function fluid-scale(
  $min-size,
  $max-size,
  $min-viewport: brp.$md-sys-viewport-compact,
  $max-viewport: brp.$md-sys-viewport-extra-large
) {
  $min-size-val: math.div($min-size, 1px);
  $max-size-val: math.div($max-size, 1px);
  $min-vp-val: math.div($min-viewport, 1px);
  $max-vp-val: math.div($max-viewport, 1px);

  $slope: math.div(
    ($max-size-val - $min-size-val),
    ($max-vp-val - $min-vp-val)
  );

  $slope-vw: $slope * 100;
  $intercept: $min-size-val - ($slope * $min-vp-val);

  @return clamp(
    #{$min-size},
    calc(#{$intercept}px + #{$slope-vw}vw),
    #{$max-size}
  );
}
